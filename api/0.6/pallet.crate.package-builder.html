<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pallet.crate.package-builder documentation</title></head><body><div id="header"><h1><a href="index.html">Package-builder 0.6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li class="current"><a href="pallet.crate.package-builder.html">pallet.crate.package-builder</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="pallet.crate.package-builder.html#var-build-user">build-user</a></li><li><a href="pallet.crate.package-builder.html#var-mock-init">mock-init</a></li><li><a href="pallet.crate.package-builder.html#var-rpm-build-source-package">rpm-build-source-package</a></li><li><a href="pallet.crate.package-builder.html#var-rpm-path">rpm-path</a></li><li><a href="pallet.crate.package-builder.html#var-rpm-rebuild">rpm-rebuild</a></li><li><a href="pallet.crate.package-builder.html#var-source-path">source-path</a></li><li><a href="pallet.crate.package-builder.html#var-spec-path">spec-path</a></li><li><a href="pallet.crate.package-builder.html#var-specfile">specfile</a></li><li><a href="pallet.crate.package-builder.html#var-srpm-path">srpm-path</a></li><li><a href="pallet.crate.package-builder.html#var-yum-mock-config">yum-mock-config</a></li><li><a href="pallet.crate.package-builder.html#var-yum-mock-config-content">yum-mock-config-content</a></li><li><a href="pallet.crate.package-builder.html#var-yum-mock-config-path">yum-mock-config-path</a></li><li><a href="pallet.crate.package-builder.html#var-yum-package-setup">yum-package-setup</a></li></ul></div><div class="namespace-docs" id="content"><h2>pallet.crate.package-builder documentation</h2><pre class="doc">Build packages.

For yum, this sets up an environment and provides methods for building
rpms using mock and rpmbuild. First build a source rpm using
`rpm-build-source-package`, the use `rpm-rebuild` to build for a specific
target.</pre><div class="public" id="var-build-user"><h3>build-user</h3><div class="usage"><code>(build-user session)</code></div><pre class="doc">Helper to return the user for building packages.
</pre></div><div class="public" id="var-mock-init"><h3>mock-init</h3><div class="usage"><code>(mock-init session &amp; {:keys [target], :or {target &quot;default&quot;}})</code></div><pre class="doc">Initialise a mock environment for a target architecture.
</pre></div><div class="public" id="var-rpm-build-source-package"><h3>rpm-build-source-package</h3><div class="usage"><code>(rpm-build-source-package session path)</code></div><pre class="doc">Build a rpm source package.
</pre></div><div class="public" id="var-rpm-path"><h3>rpm-path</h3><div class="usage"><code>(rpm-path session)</code></div><pre class="doc">Helper to return rpm path for a package.
</pre></div><div class="public" id="var-rpm-rebuild"><h3>rpm-rebuild</h3><div class="usage"><code>(rpm-rebuild session src-rpm &amp; {:keys [target resultdir], :or {target &quot;default&quot;}})</code></div><pre class="doc">Rebuild an rpm package based on a source package.
</pre></div><div class="public" id="var-source-path"><h3>source-path</h3><div class="usage"><code>(source-path session)</code></div><pre class="doc">Helper to return source path for a package.
</pre></div><div class="public" id="var-spec-path"><h3>spec-path</h3><div class="usage"><code>(spec-path session)</code></div><pre class="doc">Helper to return rpm path for a package.
</pre></div><div class="public" id="var-specfile"><h3>specfile</h3><div class="usage"><code>(specfile &amp; lines)</code></div><pre class="doc">Trivial helper for specfiles.
</pre></div><div class="public" id="var-srpm-path"><h3>srpm-path</h3><div class="usage"><code>(srpm-path session)</code></div><pre class="doc">Helper to return source path for a package.
</pre></div><div class="public" id="var-yum-mock-config"><h3>yum-mock-config</h3><div class="usage"><code>(yum-mock-config session name {:as config})</code></div><pre class="doc">Write a mock configuration file with the given name and configuration
options.</pre></div><div class="public" id="var-yum-mock-config-content"><h3>yum-mock-config-content</h3><div class="usage"><code>(yum-mock-config-content session name {:as config})</code></div><pre class="doc">Format a mock configuration file for the specified options.
The config options include:
  :root              path element for the chroot directory
  :target_arch       target architecture (e.g. i386)
  :chroot_setup_cmd  command to setup chroot, e.g. &quot;install buildsys-build&quot;
  :dist              a distribution string, e.g. el5
  :yum.conf          string specifying yu,.conf for the chroot environment</pre></div><div class="public" id="var-yum-mock-config-path"><h3>yum-mock-config-path</h3><div class="usage"><code>(yum-mock-config-path session name)</code></div><pre class="doc">Path for a mock configuration file.
</pre></div><div class="public" id="var-yum-package-setup"><h3>yum-package-setup</h3><div class="usage"><code>(yum-package-setup session &amp; {:keys [base-dir build-dir build-user packager-name packager-email], :or {build-user &quot;build&quot;, packager-name &quot;Pallet package builder&quot;, packager-email &quot;none@nowhere.com&quot;}})</code></div><pre class="doc">Setup an environment for building yum packages with mock.
Configuration of mock is required using yum-mock-config
(or use one of the distribution supplied configuration files).

You could link a configuration file as the default:

  (file/symbolic-link
    &quot;/etc/mock/epel-5-$(uname -i).cfg&quot; &quot;/etc/mock/default.cfg&quot;)</pre></div></div></body></html>